{"version":3,"sources":["webpack:///src/app/tab1/tab1.page.html","webpack:///src/app/tab1/tab1-routing.module.ts","webpack:///src/app/tab1/tab1.module.ts","webpack:///src/app/tab1/tab1.page.scss","webpack:///src/app/tab1/tab1.page.ts","webpack:///src/app/utils/getYoutubeCaptionEnglish.js"],"names":["routes","path","component","Tab1PageRoutingModule","imports","forChild","exports","Tab1PageModule","title","declarations","Tab1Page","navCtrl","videoId","captions","pointA","pointB","captionFlag","data","i","push","showDetails","youtubePlayer","playVideo","pauseVideo","stopVideo","console","log","getCurrentTime","seekTo","time","seconds","Number","split","setPlaybackRate","tag","document","createElement","src","body","appendChild","icon","selector","template","getYouTubeVideoId","video_id","window","location","search","ampersandPosition","indexOf","substring","loadYouTubeSubtitles","options","Object","assign","baseUrl","languageId","callbackFn","json","decodeHTML","el","__decode","str","replace","innerHTML","textContent","removeElement","parentNode","removeChild","parseTranscriptAsJSON","xml","slice","call","querySelectorAll","map","text","start","formatTime","Math","floor","getAttribute","dur","date","Date","setSeconds","toISOString","substr","xhr","XMLHttpRequest","open","responseType","onload","status","response","onerror","send","jsonToCsv","includeHeader","delimiter","ignoreKeys","keys","filter","key","lines","join","concat","entry"],"mappings":"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","file":"tab1-tab1-module-es5.js","sourcesContent":["export default \"<ion-header>\\n</ion-header>\\n\\n<ion-content>\\n  <div class=\\\"centering_parent\\\" >\\n    <ion-grid>\\n    <ion-row>\\n      <ion-col>\\n        <youtube-player\\n        [videoId]=\\\"videoId\\\"\\n        [width]=\\\"300\\\"    \\n        [height]=\\\"200\\\" \\n        >\\n        </youtube-player>    \\n      </ion-col>\\n    </ion-row>\\n\\n    <ion-row>\\n      <ion-col>\\n      </ion-col>\\n    </ion-row>\\n\\n    <ion-row>\\n      <ion-col>\\n        <ion-button (click)=\\\"getsSpeed100()\\\">100%</ion-button>\\n        <ion-button (click)=\\\"getsSpeed50()\\\">50%</ion-button>\\n        <ion-button (click)=\\\"changeCaption()\\\">字幕切替</ion-button>\\n      </ion-col>\\n    </ion-row>\\n\\n    <div style=\\\"width:100%;height:600px;overflow:auto;\\\">\\n\\n      <div *ngIf='captionFlag; else Statement'>\\n        <ul *ngFor=\\\"let caption of captions[0]\\\">\\n          <li (click)=\\\"moveToTime(caption[0])\\\">{{caption[1]}}</li>\\n        </ul>\\n      </div>\\n\\n      <ng-template #Statement>\\n        <ul *ngFor=\\\"let caption of captions[1]\\\">\\n          <li (click)=\\\"moveToTime(caption[0])\\\">{{caption[1]}}</li>\\n        </ul>\\n      </ng-template>\\n\\n    </div>\\n\\n  </ion-grid>\\n</div>\\n\\n</ion-content>\\n\";","import { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\nimport { Tab1Page } from './tab1.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: Tab1Page,\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class Tab1PageRoutingModule {}\n","import { IonicModule } from '@ionic/angular';\nimport { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Tab1Page } from './tab1.page';\nimport { ExploreContainerComponentModule } from '../explore-container/explore-container.module';\n\nimport { Tab1PageRoutingModule } from './tab1-routing.module';\n\nimport {YouTubePlayerModule} from '@angular/youtube-player'; \n\n\n@NgModule({\n  imports: [\n    IonicModule,\n    CommonModule,\n    FormsModule,\n    ExploreContainerComponentModule,\n    Tab1PageRoutingModule,\n    YouTubePlayerModule,\n  ],\n  declarations: [Tab1Page]\n})\nexport class Tab1PageModule {\n  title = \"Practice\";\n}","export default \"@charset \\\"UTF-8\\\";\\n.centering_parent {\\n  padding: 20px;\\n  /* 余白指定 */\\n  text-align: center;\\n  /* 中央寄せ */\\n}\\nul {\\n  list-style: none;\\n  font-size: 35px;\\n  font-weight: bolder;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvdGFiMS90YWIxLnBhZ2Uuc2NzcyIsIi9Vc2Vycy90Y29vbC9EZXNrdG9wL3lvdXR1YmVuL3NyYy9hcHAvdGFiMS90YWIxLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxnQkFBZ0I7QUNBaEI7RUFDSSxhQUFBO0VBQTRCLFNBQUE7RUFDNUIsa0JBQUE7RUFBNEIsU0FBQTtBREloQztBQ0RBO0VBQ0ksZ0JBQUE7RUFDQSxlQUFBO0VBQ0EsbUJBQUE7QURJSiIsImZpbGUiOiJzcmMvYXBwL3RhYjEvdGFiMS5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyJAY2hhcnNldCBcIlVURi04XCI7XG4uY2VudGVyaW5nX3BhcmVudCB7XG4gIHBhZGRpbmc6IDIwcHg7XG4gIC8qIOS9meeZveaMh+WumiAqL1xuICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gIC8qIOS4reWkruWvhOOBmyAqL1xufVxuXG51bCB7XG4gIGxpc3Qtc3R5bGU6IG5vbmU7XG4gIGZvbnQtc2l6ZTogMzVweDtcbiAgZm9udC13ZWlnaHQ6IGJvbGRlcjtcbn0iLCIuY2VudGVyaW5nX3BhcmVudCB7XG4gICAgcGFkZGluZzogMjBweDsgICAgICAgICAgICAgIC8qIOS9meeZveaMh+WumiAqL1xuICAgIHRleHQtYWxpZ246ICBjZW50ZXI7ICAgICAgICAvKiDkuK3lpK7lr4TjgZsgKi9cbn1cblxudWx7XG4gICAgbGlzdC1zdHlsZTogbm9uZTtcbiAgICBmb250LXNpemU6IDM1cHg7XG4gICAgZm9udC13ZWlnaHQ6IGJvbGRlcjtcbn1cblxuIl19 */\";","import {Component, OnInit, ViewChild} from '@angular/core';\nimport {YouTubePlayer} from '@angular/youtube-player';\n\nimport {captions} from '../utils/getYoutubeCaptionEnglish'\n\n\nimport { NavController } from '@ionic/angular';\n\n\n@Component({\n  selector: 'app-tab1',\n  templateUrl: 'tab1.page.html',\n  styleUrls: ['tab1.page.scss']\n})\n\nexport class Tab1Page {\n\n  title = \"Practice\"\n  videoId: string = \"p13eKmDz88g\";\n\n  captions = \"\";\n\n  pointA = 0;\n  pointB = 0;\n\n  captionFlag = true;\n\n  public items: Array<any>;\n \n  @ViewChild(YouTubePlayer) youtubePlayer: YouTubePlayer;\n\n  clickPlay() {\n    this.youtubePlayer.playVideo();\n  }\n\n  clickPause() {\n    this.youtubePlayer.pauseVideo();\n  }\n\n  clickStop() {    \n    this.youtubePlayer.stopVideo();\n  }\n\n  setA() {\n    console.log(\"A is clicked\");\n    this.pointA = this.youtubePlayer.getCurrentTime();\n    console.log(this.pointA);\n  }\n\n  backToA() {\n    console.log(\"B is clicked\");\n    this.pointB = this.youtubePlayer.getCurrentTime();\n    this.youtubePlayer.seekTo(this.pointA, true);\n  }\n\n\n　// 指定の時間に移動する　\n  moveToTime(time){\n    var seconds = Number(time.split(\":\")[0]*60) + Number(time.split(\":\")[1])\n    this.youtubePlayer.seekTo(seconds, true);\n    this.youtubePlayer.playVideo();\n  }\n\n  changeCaption(){\n    if(this.captionFlag == true){\n      this.captionFlag = false;\n      console.log(this.captionFlag);\n    }else if(this.captionFlag == false){\n      this.captionFlag = true;\n      console.log(this.captionFlag);\n    }\n  }\n\n  checkCaptionFlag(){\n    return this.captionFlag;\n  }\n\n  freeMarker() {\n    this.pointA = 0;\n  }\n\n  getsSpeed100(){\n    this.youtubePlayer.setPlaybackRate(1);\n  }\n\n  getsSpeed50(){\n    this.youtubePlayer.setPlaybackRate(0.5);\n  }\n\n  getsSpeed25(){\n    this.youtubePlayer.setPlaybackRate(0.25);\n  }\n\n  back2Sec() {\n    this.youtubePlayer.seekTo(this.youtubePlayer.getCurrentTime() - 2, true);\n  }\n\n  back3Sec() {\n    this.youtubePlayer.seekTo(this.youtubePlayer.getCurrentTime() - 3, true);\n  }\n\n  back5Sec() {\n    this.youtubePlayer.seekTo(this.youtubePlayer.getCurrentTime() - 5, true);\n  }\n\n  ngOnInit() {\n    const tag = document.createElement('script');\n    tag.src = \"https://www.youtube.com/iframe_api\";\n    document.body.appendChild(tag);\n\n    this.captions = captions;\n\n    console.log(captions);\n  }\n\n  data: Array<{title: string, showDetails: boolean}> = [];\n  constructor(public navCtrl: NavController) {\n  for(let i = 1; i < 4 ; i++ ){\n      this.data.push({\n        title: 'Video '+i,\n        showDetails: false\n      });\n    }\n  }\n\n  toggleDetails(data) {\n    if (data.showDetails) {\n      data.showDetails = false;\n      data.icon = 'add-outline';\n    } else {\n      data.showDetails = true;\n      data.icon = 'ios-remove-circle-outline';\n    }\n  }\n}","function getYouTubeVideoId() {\n  var video_id = window.location.search.split('v=')[1];\n  if (video_id != null) {\n    var ampersandPosition = video_id.indexOf('&');\n    if (ampersandPosition != -1) {\n      return video_id.substring(0, ampersandPosition);\n    }\n  }\n  return null;\n}\n\nexport function loadYouTubeSubtitles(videoId, options) {\n  options = Object.assign({\n      baseUrl : 'https://video.google.com/timedtext',\n      languageId : 'en',\n      callbackFn : function(json) { console.log(json); }\n    }, options || {});\n\n  var decodeHTML = (function() {\n    let el = document.createElement('div');\n    function __decode(str) {\n      if (str && typeof str === 'string') {\n        str = str.replace(/<script[^>]*>([\\S\\s]*?)<\\/script>/gmi, '')\n          .replace(/<\\/?\\w(?:[^\"'>]|\"[^\"]*\"|'[^']*')*>/gmi, '')\n        el.innerHTML = str;\n        str = el.textContent;\n        el.textContent = '';\n      }\n      return str;\n    }\n    removeElement(el);\n    return __decode;\n  })();\n  \n  function removeElement(el) {\n    el && el.parentNode && el.parentNode.removeChild(el);\n  }\n\n  function parseTranscriptAsJSON(xml) {\n    return [].slice.call(xml.querySelectorAll('transcript text'))\n      .map(text => ({\n        start : formatTime(Math.floor(text.getAttribute('start'))),\n        dur : formatTime(Math.floor(text.getAttribute('dur'))),\n        text : decodeHTML(text.textContent).replace(/\\s+/g, ' '),\n      })\n      );\n  }\n\n  function formatTime(seconds) {\n    let date = new Date(null);\n    date.setSeconds(seconds);\n    return date.toISOString().substr(11, 8).slice(4,11);\n//    return Date.parse(date) * 0.001;\n  }\n\n  let xhr = new XMLHttpRequest();\n  xhr.open('POST', `${options.baseUrl}?lang=${options.languageId}&v=${videoId}`, true);\n  xhr.responseType = 'document';\n  xhr.onload = function() {\n    if (this.status >= 200 && this.status < 400) {\n      options.callbackFn(parseTranscriptAsJSON(this.response));\n    } else {\n      console.log('Error: ' + this.status);\n    }\n  };\n\n  xhr.onerror = function() {\n    console.log('Error!');\n  };\n\n  xhr.send();\n}\n\nfunction jsonToCsv(json, options) {\n  options = Object.assign({\n    includeHeader : true,\n    delimiter : ',',\n    ignoreKeys : []\n  }, options || {});\n  let keys = Object.keys(json[0]).filter(key => options.ignoreKeys.indexOf(key) === -1);\n  let lines = [];\n  if (options.includeHeader) { \n    lines.push(keys.join(options.delimiter)); \n  }\n  return lines.concat(json\n    .map(entry => keys.map(key => entry[key]).join(options.delimiter)))\n    .map(entry => entry.replace(\"-\",\"\"))\n    .map(entry => entry.split(\"\t\"))\n}\n\nexport let captions = [];\n\nloadYouTubeSubtitles('p13eKmDz88g', {\n    callbackFn : function(json) {\n      captions.push(jsonToCsv(json, {\n        includeHeader : false,\n        ignoreKeys : [ 'dur' ],\n        delimiter : '\\t',\n      })\n      );\n      // result = JSON.stringify(json);\n\n    }\n});\n\nloadYouTubeSubtitles('p13eKmDz88g', {\n  languageId : 'ja',\n  callbackFn : function(json) {\n    captions.push(jsonToCsv(json, {\n      includeHeader : false,\n      ignoreKeys : [ 'dur' ],\n      delimiter : '\\t',\n    })\n    );\n    // result = JSON.stringify(json);\n\n  }\n});"]}