{"version":3,"sources":["./src/app/tab1/tab1.page.html","./src/app/tab1/tab1-routing.module.ts","./src/app/tab1/tab1.module.ts","./src/app/tab1/tab1.page.scss","./src/app/tab1/tab1.page.ts","./src/app/utils/getYoutubeCaptionEnglish.js"],"names":[],"mappings":"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Aa;;AAvFf;IAAzB,+DAAS,CAAC,qEAAa,CAAC;+CAA8B;AAd5C,QAAQ;IANpB,+DAAS,CAAC;QACT,QAAQ,EAAE,UAAU;QACpB,8MAA6B;;KAE9B,CAAC;GAEW,QAAQ,CAuHpB;AAvHoB;;;;;;;;;;;;;ACfrB;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEO;AACP;AACA;AACA;AACA,mCAAmC,mBAAmB;AACtD,KAAK,eAAe;;AAEpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,sBAAsB,gBAAgB,QAAQ,mBAAmB,KAAK,QAAQ;AAC9E;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG,eAAe;AAClB;AACA;AACA,8B;AACA,6C;AACA;AACA;AACA;AACA;AACA;AACA;;AAEO;;AAEP;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA,CAAC,E","file":"tab1-tab1-module-es2015.js","sourcesContent":["export default \"<ion-header>\\n</ion-header>\\n\\n<ion-content>\\n  <div class=\\\"centering_parent\\\" >\\n    <ion-grid>\\n    <ion-row>\\n      <ion-col>\\n        <youtube-player\\n        [videoId]=\\\"videoId\\\"\\n        [width]=\\\"300\\\"    \\n        [height]=\\\"200\\\" \\n        >\\n        </youtube-player>    \\n      </ion-col>\\n    </ion-row>\\n\\n    <ion-row>\\n      <ion-col>\\n      </ion-col>\\n    </ion-row>\\n\\n    <ion-row>\\n      <ion-col>\\n        <ion-button (click)=\\\"getsSpeed100()\\\">100%</ion-button>\\n        <ion-button (click)=\\\"getsSpeed50()\\\">50%</ion-button>\\n        <ion-button (click)=\\\"changeCaption()\\\">字幕切替</ion-button>\\n      </ion-col>\\n    </ion-row>\\n\\n    <div style=\\\"width:100%;height:600px;overflow:auto;\\\">\\n\\n      <div *ngIf='captionFlag; else Statement'>\\n        <ul *ngFor=\\\"let caption of captions[0]\\\">\\n          <li (click)=\\\"moveToTime(caption[0])\\\">{{caption[1]}}</li>\\n        </ul>\\n      </div>\\n\\n      <ng-template #Statement>\\n        <ul *ngFor=\\\"let caption of captions[1]\\\">\\n          <li (click)=\\\"moveToTime(caption[0])\\\">{{caption[1]}}</li>\\n        </ul>\\n      </ng-template>\\n\\n    </div>\\n\\n  </ion-grid>\\n</div>\\n\\n</ion-content>\\n\";","import { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\nimport { Tab1Page } from './tab1.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: Tab1Page,\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class Tab1PageRoutingModule {}\n","import { IonicModule } from '@ionic/angular';\nimport { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Tab1Page } from './tab1.page';\nimport { ExploreContainerComponentModule } from '../explore-container/explore-container.module';\n\nimport { Tab1PageRoutingModule } from './tab1-routing.module';\n\nimport {YouTubePlayerModule} from '@angular/youtube-player'; \n\n\n@NgModule({\n  imports: [\n    IonicModule,\n    CommonModule,\n    FormsModule,\n    ExploreContainerComponentModule,\n    Tab1PageRoutingModule,\n    YouTubePlayerModule,\n  ],\n  declarations: [Tab1Page]\n})\nexport class Tab1PageModule {\n  title = \"Practice\";\n}","export default \"@charset \\\"UTF-8\\\";\\n.centering_parent {\\n  padding: 20px;\\n  /* 余白指定 */\\n  text-align: center;\\n  /* 中央寄せ */\\n}\\nul {\\n  list-style: none;\\n  font-size: 35px;\\n  font-weight: bolder;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvdGFiMS90YWIxLnBhZ2Uuc2NzcyIsIi9Vc2Vycy90Y29vbC9EZXNrdG9wL3lvdXR1YmVuL3NyYy9hcHAvdGFiMS90YWIxLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxnQkFBZ0I7QUNBaEI7RUFDSSxhQUFBO0VBQTRCLFNBQUE7RUFDNUIsa0JBQUE7RUFBNEIsU0FBQTtBREloQztBQ0RBO0VBQ0ksZ0JBQUE7RUFDQSxlQUFBO0VBQ0EsbUJBQUE7QURJSiIsImZpbGUiOiJzcmMvYXBwL3RhYjEvdGFiMS5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyJAY2hhcnNldCBcIlVURi04XCI7XG4uY2VudGVyaW5nX3BhcmVudCB7XG4gIHBhZGRpbmc6IDIwcHg7XG4gIC8qIOS9meeZveaMh+WumiAqL1xuICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gIC8qIOS4reWkruWvhOOBmyAqL1xufVxuXG51bCB7XG4gIGxpc3Qtc3R5bGU6IG5vbmU7XG4gIGZvbnQtc2l6ZTogMzVweDtcbiAgZm9udC13ZWlnaHQ6IGJvbGRlcjtcbn0iLCIuY2VudGVyaW5nX3BhcmVudCB7XG4gICAgcGFkZGluZzogMjBweDsgICAgICAgICAgICAgIC8qIOS9meeZveaMh+WumiAqL1xuICAgIHRleHQtYWxpZ246ICBjZW50ZXI7ICAgICAgICAvKiDkuK3lpK7lr4TjgZsgKi9cbn1cblxudWx7XG4gICAgbGlzdC1zdHlsZTogbm9uZTtcbiAgICBmb250LXNpemU6IDM1cHg7XG4gICAgZm9udC13ZWlnaHQ6IGJvbGRlcjtcbn1cblxuIl19 */\";","import {Component, OnInit, ViewChild} from '@angular/core';\nimport {YouTubePlayer} from '@angular/youtube-player';\n\nimport {captions} from '../utils/getYoutubeCaptionEnglish'\n\n\nimport { NavController } from '@ionic/angular';\n\n\n@Component({\n  selector: 'app-tab1',\n  templateUrl: 'tab1.page.html',\n  styleUrls: ['tab1.page.scss']\n})\n\nexport class Tab1Page {\n\n  title = \"Practice\"\n  videoId: string = \"p13eKmDz88g\";\n\n  captions = \"\";\n\n  pointA = 0;\n  pointB = 0;\n\n  captionFlag = true;\n\n  public items: Array<any>;\n \n  @ViewChild(YouTubePlayer) youtubePlayer: YouTubePlayer;\n\n  clickPlay() {\n    this.youtubePlayer.playVideo();\n  }\n\n  clickPause() {\n    this.youtubePlayer.pauseVideo();\n  }\n\n  clickStop() {    \n    this.youtubePlayer.stopVideo();\n  }\n\n  setA() {\n    console.log(\"A is clicked\");\n    this.pointA = this.youtubePlayer.getCurrentTime();\n    console.log(this.pointA);\n  }\n\n  backToA() {\n    console.log(\"B is clicked\");\n    this.pointB = this.youtubePlayer.getCurrentTime();\n    this.youtubePlayer.seekTo(this.pointA, true);\n  }\n\n\n　// 指定の時間に移動する　\n  moveToTime(time){\n    var seconds = Number(time.split(\":\")[0]*60) + Number(time.split(\":\")[1])\n    this.youtubePlayer.seekTo(seconds, true);\n    this.youtubePlayer.playVideo();\n  }\n\n  changeCaption(){\n    if(this.captionFlag == true){\n      this.captionFlag = false;\n      console.log(this.captionFlag);\n    }else if(this.captionFlag == false){\n      this.captionFlag = true;\n      console.log(this.captionFlag);\n    }\n  }\n\n  checkCaptionFlag(){\n    return this.captionFlag;\n  }\n\n  freeMarker() {\n    this.pointA = 0;\n  }\n\n  getsSpeed100(){\n    this.youtubePlayer.setPlaybackRate(1);\n  }\n\n  getsSpeed50(){\n    this.youtubePlayer.setPlaybackRate(0.5);\n  }\n\n  getsSpeed25(){\n    this.youtubePlayer.setPlaybackRate(0.25);\n  }\n\n  back2Sec() {\n    this.youtubePlayer.seekTo(this.youtubePlayer.getCurrentTime() - 2, true);\n  }\n\n  back3Sec() {\n    this.youtubePlayer.seekTo(this.youtubePlayer.getCurrentTime() - 3, true);\n  }\n\n  back5Sec() {\n    this.youtubePlayer.seekTo(this.youtubePlayer.getCurrentTime() - 5, true);\n  }\n\n  ngOnInit() {\n    const tag = document.createElement('script');\n    tag.src = \"https://www.youtube.com/iframe_api\";\n    document.body.appendChild(tag);\n\n    this.captions = captions;\n\n    console.log(captions);\n  }\n\n  data: Array<{title: string, showDetails: boolean}> = [];\n  constructor(public navCtrl: NavController) {\n  for(let i = 1; i < 4 ; i++ ){\n      this.data.push({\n        title: 'Video '+i,\n        showDetails: false\n      });\n    }\n  }\n\n  toggleDetails(data) {\n    if (data.showDetails) {\n      data.showDetails = false;\n      data.icon = 'add-outline';\n    } else {\n      data.showDetails = true;\n      data.icon = 'ios-remove-circle-outline';\n    }\n  }\n}","function getYouTubeVideoId() {\n  var video_id = window.location.search.split('v=')[1];\n  if (video_id != null) {\n    var ampersandPosition = video_id.indexOf('&');\n    if (ampersandPosition != -1) {\n      return video_id.substring(0, ampersandPosition);\n    }\n  }\n  return null;\n}\n\nexport function loadYouTubeSubtitles(videoId, options) {\n  options = Object.assign({\n      baseUrl : 'https://video.google.com/timedtext',\n      languageId : 'en',\n      callbackFn : function(json) { console.log(json); }\n    }, options || {});\n\n  var decodeHTML = (function() {\n    let el = document.createElement('div');\n    function __decode(str) {\n      if (str && typeof str === 'string') {\n        str = str.replace(/<script[^>]*>([\\S\\s]*?)<\\/script>/gmi, '')\n          .replace(/<\\/?\\w(?:[^\"'>]|\"[^\"]*\"|'[^']*')*>/gmi, '')\n        el.innerHTML = str;\n        str = el.textContent;\n        el.textContent = '';\n      }\n      return str;\n    }\n    removeElement(el);\n    return __decode;\n  })();\n  \n  function removeElement(el) {\n    el && el.parentNode && el.parentNode.removeChild(el);\n  }\n\n  function parseTranscriptAsJSON(xml) {\n    return [].slice.call(xml.querySelectorAll('transcript text'))\n      .map(text => ({\n        start : formatTime(Math.floor(text.getAttribute('start'))),\n        dur : formatTime(Math.floor(text.getAttribute('dur'))),\n        text : decodeHTML(text.textContent).replace(/\\s+/g, ' '),\n      })\n      );\n  }\n\n  function formatTime(seconds) {\n    let date = new Date(null);\n    date.setSeconds(seconds);\n    return date.toISOString().substr(11, 8).slice(4,11);\n//    return Date.parse(date) * 0.001;\n  }\n\n  let xhr = new XMLHttpRequest();\n  xhr.open('POST', `${options.baseUrl}?lang=${options.languageId}&v=${videoId}`, true);\n  xhr.responseType = 'document';\n  xhr.onload = function() {\n    if (this.status >= 200 && this.status < 400) {\n      options.callbackFn(parseTranscriptAsJSON(this.response));\n    } else {\n      console.log('Error: ' + this.status);\n    }\n  };\n\n  xhr.onerror = function() {\n    console.log('Error!');\n  };\n\n  xhr.send();\n}\n\nfunction jsonToCsv(json, options) {\n  options = Object.assign({\n    includeHeader : true,\n    delimiter : ',',\n    ignoreKeys : []\n  }, options || {});\n  let keys = Object.keys(json[0]).filter(key => options.ignoreKeys.indexOf(key) === -1);\n  let lines = [];\n  if (options.includeHeader) { \n    lines.push(keys.join(options.delimiter)); \n  }\n  return lines.concat(json\n    .map(entry => keys.map(key => entry[key]).join(options.delimiter)))\n    .map(entry => entry.replace(\"-\",\"\"))\n    .map(entry => entry.split(\"\t\"))\n}\n\nexport let captions = [];\n\nloadYouTubeSubtitles('p13eKmDz88g', {\n    callbackFn : function(json) {\n      captions.push(jsonToCsv(json, {\n        includeHeader : false,\n        ignoreKeys : [ 'dur' ],\n        delimiter : '\\t',\n      })\n      );\n      // result = JSON.stringify(json);\n\n    }\n});\n\nloadYouTubeSubtitles('p13eKmDz88g', {\n  languageId : 'ja',\n  callbackFn : function(json) {\n    captions.push(jsonToCsv(json, {\n      includeHeader : false,\n      ignoreKeys : [ 'dur' ],\n      delimiter : '\\t',\n    })\n    );\n    // result = JSON.stringify(json);\n\n  }\n});"],"sourceRoot":"webpack:///"}